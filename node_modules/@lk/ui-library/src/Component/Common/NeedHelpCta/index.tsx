import React, { useRef } from "react";
import { WhatsAppIcon } from "../../../Icons";
import { TypographyENUM } from "../../../Types/general";
import Button from "../../V1/Button";
import { kindENUM } from "../../V1/Button/Button.types";
import { NeedHelpCtaProps } from "./NeedHelpCta.types";
import { HiddenAnchor } from "./styles";

export default function NeedHelpCta({ localeData, isRendered, isBuyOnChat, whatsappChatMsg, phoneNumber, onClick }: NeedHelpCtaProps) {
	const anchorRef = useRef<HTMLAnchorElement>(null);
	const clickHandler = () => {
		if (onClick && typeof onClick === "function") onClick();
		anchorRef.current?.click();
	};

	return (
		<>
			{isRendered && (
				<Button
					id="need-help-cta"
					style={{ color: "#000042" }}
					text={`${localeData?.NEED_HELP}?`}
					width=""
					kind={kindENUM.tertiary}
					showLeftIcon={true}
					leftIcon={<WhatsAppIcon width={16} height={16} />}
					showRightIcon={false}
					font={TypographyENUM.lkSansBold}
					onClick={clickHandler}
				/>
			)}
			<HiddenAnchor ref={anchorRef} href={isBuyOnChat ? `${localeData.WHATSAPP_CHAT_URL}${whatsappChatMsg}` : `tel:${phoneNumber}`} />
		</>
	);
}
