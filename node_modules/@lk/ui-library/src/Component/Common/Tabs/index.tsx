import React from "react";
import Tab from "./Tab";
import { TabContent, TabList } from "./tabs.styles";
// import "./Tabs.scss";

const Tabs = (props:any) => {
	const { activeKey, children, className, id, onSelect, ...other } = props;

	return (
		<div className={className} id={id}>
			<TabList role="tablist">
				{children?.map((child: any, idx: number) => {
					if (child && Array.isArray(child)) {
						return child?.map((item, idx) => {
							const { eventKey, title /* , children */ } = item?.props || {
								eventKey: "",
								title: "",
							};
							return (
								<Tab
									key={idx}
									className={eventKey === activeKey ? "active" : ""}
									eventKey={eventKey}
									title={title}
									onSelect={onSelect}
									{...other}
								>
									{title?.props?.children}
								</Tab>
							);
						});
					} else if (child) {
						const { eventKey, title /* , children */ } = child?.props || {
							eventKey: "",
							title: "",
						};
						return (
							<Tab
								key={idx}
								className={eventKey === activeKey ? "active" : ""}
								eventKey={eventKey}
								title={title}
								onSelect={onSelect}
							>
								{title}
							</Tab>
						);
					}
					return null;
				})}
			</TabList>
			<TabContent>
				{children?.map((child:any) => {
					if (child && Array.isArray(child)) {
						return child?.map(item => {
							if (item?.props?.eventKey !== activeKey || item === false) return null;
							return item?.props?.children;
						});
					} else if (child) {
						if (child?.props?.eventKey !== activeKey || child === false) return null;
						return child?.props?.children;
					}
					return null;
				})}
			</TabContent>
		</div>
	);
};

export default Tabs;
