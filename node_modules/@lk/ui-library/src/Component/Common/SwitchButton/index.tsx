import React from "react";
import { useState, useEffect } from "react";
import {
	SwitchButtonWrapper,
	SwitchWrapper,
	CmnToggleInputWrapper,
	CmnToggleLabelWrapper,
	LeftSpanWrapper,
	RightSpanWrapper,
} from "./styles";
import { SwitchButtonTypes } from "./SwitchButton.types";
import { ComponentSizeENUM } from "../../../Types/general";

/**
 * Default Switch button Component
 */
const SwitchButton = ({
	id,
	name,
	currentStatus,
	leftText,
	rightText,
	onClick = () => null,
	getToggleValue = () => null,
	size = ComponentSizeENUM.medium,
	isRTL = false
}: SwitchButtonTypes) => {
	const [left, setLeft] = useState(currentStatus);
	const [checked, setChecked] = useState(isRTL ? true : false);

	const handleToggle = (isLeft:boolean) => {
		setLeft(isLeft);
		onClick();
	};
	useEffect(() => {
		if (left) setChecked(isRTL ? true : false);
		else setChecked(!isRTL ? true : false);
		getToggleValue(!left);
	}, [left]);


	return (
		<SwitchButtonWrapper data-testid="switchButton">
			{leftText && (
				<LeftSpanWrapper
					data-testid="switch-leftText"
					styleSize={size}
					checked={checked}
					onClick={() => handleToggle(true)}
				>
					{leftText}
				</LeftSpanWrapper>
			)}
			<SwitchWrapper>
				<CmnToggleInputWrapper
					type="checkbox"
					id={id}
					name={name}
					data-testid="switch-input"
				/>
				<CmnToggleLabelWrapper
					checked={checked}
					onClick={() => handleToggle(!left)}
					data-testid="switch-label"
				/>
			</SwitchWrapper>
			{rightText && (
				<RightSpanWrapper
					data-testid="switch-rightText"
					styleSize={size}
					checked={checked}
					onClick={() => {
						handleToggle(false);
					}
					}
				>
					{rightText}
				</RightSpanWrapper>
			)}
		</SwitchButtonWrapper>
	);
};

export default SwitchButton;
