import React, { useState } from "react";
import HtoRating from "../HtoRating";
import { ReviewsAndCommentTypes } from "./ReviewsAndCommnet.types";
import { ReviewsAndCommentWrapper, RatingNameImageWrapper, ImageWrap, RatingNameWrap, RatingName, RatingComment, ReviewsAndCommentContainer, LoadMore } from "./styles";


const ReviewsAndComment = ({ dataLocale, commentsInfo, isRTL }: ReviewsAndCommentTypes) => {
	const [showMoreItem, setShowMoreItem] = useState(2);
	const showMoreItemFunc = () => {
		setShowMoreItem(commentsInfo?.length);
	};

	const showLessItemFunc = () => {
		setShowMoreItem(2);
	};

	return (<ReviewsAndCommentContainer>
		{commentsInfo && commentsInfo.map((info:any,index:number) => {
			if (index < showMoreItem) {
				return <ReviewsAndCommentWrapper key={`${info.name}_${index}`}>
					<RatingNameImageWrapper>
						<ImageWrap>
							<img src={info.image} alt={info.name} />
						</ImageWrap>
						<RatingNameWrap>
							<HtoRating
								id="customer-star-rating"
								rating={info.rating}
								onStarsChange = {() => null}
								maxRating={5}
								isReadOnly={true}
								isRTL={isRTL}
								ratingCount={""}
								ratingNumber={""}
							/>
							<RatingName>{info.name}</RatingName>
						</RatingNameWrap>
					</RatingNameImageWrapper>
					<RatingComment>
						{info.comment}
					</RatingComment>
				</ReviewsAndCommentWrapper>;
			}
		})
		}
		{showMoreItem <= 2 ? <LoadMore onClick={() => showMoreItemFunc()}>{dataLocale.LOAD_MORE}...</LoadMore> : <LoadMore onClick={() => showLessItemFunc()}>{dataLocale.LOAD_LESS}...</LoadMore>}
	</ReviewsAndCommentContainer>
	);
};

export default ReviewsAndComment;