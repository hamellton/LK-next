import React from "react";
import SvgStar from "../../../Icons/Star";
import SvgStarOutlined from "../../../Icons/StarOutlined";
import { RatingTypes } from "./Rating.types";
import { RatingWrapper, RatingText, RatingCount } from "./Rating.styles";
import * as Icons from "../../../Icons/index";

const HtoRating = ({
	id="star-rating",
	rating,
	maxRating=5,
	ratingNumber = "",
	ratingCount = ""
}: RatingTypes) => {

	function renderRating (rating: number) {
		const arr:number[] = [];
		arr.length = parseInt(rating.toString());
		arr.fill(1);
		let halfStar = false;
		if (rating % 1 !== 0) halfStar = true;
		const emptyStar:number[] = [];
		if (maxRating - arr.length > 0 && !halfStar) {
			emptyStar.length = parseInt((maxRating - arr.length).toString());
			emptyStar.fill(1);
		} else if (maxRating - arr.length - 1 > 0 && halfStar) {
			emptyStar.length = parseInt((maxRating - arr.length - 1).toString());
			emptyStar.fill(1);
		}
		return (
			<>
				{arr.map((item:number) => {
					return <SvgStar key={`svgStar_${item}`} fill="#0FBD95" />;
				})}
				{halfStar && <Icons.SvgHalfFilledStar />}
				{emptyStar.map((item:number) => {
					return <SvgStarOutlined key={`outFilledSvgStar_${item}`} fill="#0FBD95" />;
				})}
			</>
		);
	}

	return <RatingWrapper id={id}>
		{renderRating(rating)}
		{ratingNumber && <RatingText>{ratingNumber}</RatingText>}
		{ratingCount && <RatingCount>({ratingCount})</RatingCount>}
	</RatingWrapper>;
};

export default HtoRating;
