import React, { useState } from "react";
import { RadioGroupContainer, Error, SubmitButton, InputContainer, RadioContainer, Text, RadioInnerCircle } from "./NewRadioGroup.styles";
import { NewRadioGroupType, RadioType } from "./NewRadioGroup.types";

const Radio = ({ isSelected = false, onClick = () => null }: RadioType) => {
	return (
		<RadioContainer isSelected={isSelected} onClick={onClick}>
			<RadioInnerCircle isSelected={isSelected} />
		</RadioContainer>
	);
};

const NewRadioGroup = ({ data, row, column, isRequired }:NewRadioGroupType) => {

	const [selectedButton, SetSelectedButton] = useState("");
	const [show, setShow] = useState(false);

	const formSubmit = (e : React.FormEvent<HTMLFormElement>) => {
		e.preventDefault();
		if(selectedButton === "" && isRequired) setShow(true);
		else alert(`Data Value: "${selectedButton}"`);
	};

	return (
		<form action="" onSubmit={ formSubmit }>
			<RadioGroupContainer row={row} column={column}>
				{
					data.map((obj,index) => {
						return(
							<InputContainer key={index}>
								<Radio isSelected={selectedButton === obj.value} onClick={() => SetSelectedButton(obj.value)} /> <Text> {obj.key} </Text>
							</InputContainer>
						);
					})
				}
			</RadioGroupContainer>
			{show && <Error>No option selected</Error>}
			<SubmitButton type="submit">Submit</SubmitButton>
		</form>
	);
};

export default NewRadioGroup;
