import React, { useEffect, } from "react";
import { JSON } from "../../../../Types/general";
import { Radio } from "../../NewPayment/components/Radio";
import { RadioTabWrapper, Name, PayLaterWrapper, NameContainer, OfferText } from "./Grabpay.styles";
import { AtomePropsType } from "./Grabpay.types";

// eslint-disable-next-line @typescript-eslint/no-unused-vars
function Grabpay({
	groupData,
	isSelected,
	onClick,
	setPayLaterSelected,
	setSectedPrimerCreditCard
}: AtomePropsType) {

	useEffect(() => {
		if (isSelected) {
			setPayLaterSelected(true);
			(groupData?.methods)?.map((methodData: JSON) => {
				if (methodData.key === isSelected) {
					// setSelectedMethod(methodData);
				}
				return methodData;
			});
		}else{
			setPayLaterSelected(false);
		}
	}, [isSelected]);

	return (
		<>
			<PayLaterWrapper>
				{
					groupData?.methods?.map((methodData: JSON) => (
						<RadioTabWrapper key={methodData.key as string} onClick={() => {
							onClick(methodData.key as string);
							setSectedPrimerCreditCard(false);
							// setShowBottomsheet(true);
						}}>
							<Radio isSelected={isSelected === methodData.key} onClick={() => null} />
							<NameContainer>
								<Name>{ methodData.label as string }</Name>
								{Boolean(methodData.offerText) && <OfferText>{methodData.offerText as string}</OfferText>}
							</NameContainer>
						</RadioTabWrapper>
					))
				}
			</PayLaterWrapper>
		</>
	);
}

export { Grabpay };