import React from "react";
import * as Icons from "../../../../Icons/index";
import { ContentWrapper, ImageWrapper, PackageCoatingContainer, PackageCoatingSelection, Price, RightSection, SkipCoating, TextWrapper, Title } from "./PackageCoating.styles";
import { AddOnType, PackageCoatingTypes, SinglePrice } from "./PackageCoating.types";

const PackageCoating = (props: PackageCoatingTypes) => {
	const { addOnData, skipCoatingAction, onSelectCoating, selectedAddOns } = props;
	return (
		<PackageCoatingContainer>
			{addOnData?.map((addOn: AddOnType) => (
				<PackageCoatingSelection key={addOn.id}onClick={() => onSelectCoating(addOn.id)} selected={selectedAddOns?.some(sel => sel === addOn.id)}>
					{addOn.imageUrl && <ImageWrapper>
						<img src={addOn.imageUrl} alt="add-on" />
					</ImageWrapper>}
					{!addOn.imageUrl && <ImageWrapper>
						<Icons.DummyImage height="100%" width="250px" />
					</ImageWrapper>}
					<RightSection>
						<ContentWrapper>
							<Title>
								{addOn.title}
							</Title>
							<Price>
								{Array.isArray(addOn.price) ? `${addOn.price?.[0]?.symbol} ${(addOn.price?.filter(pr => pr.name === "Lenskart Price")?.[0]?.price || addOn.price?.[0]?.price)}` : (addOn.price as SinglePrice)?.symbol + (addOn.price as SinglePrice)?.lkPrice
								}
							</Price>
						</ContentWrapper>
						{selectedAddOns?.some(selected => selected === addOn.id) ? <Icons.CheckCircleOutlineOutlined fill="var(--dark-blue-100)" /> : (
							<Icons.IconRight />
						)}
					</RightSection>
				</PackageCoatingSelection>
			))}
			<SkipCoating onClick={skipCoatingAction}>
				<Icons.Lens />
				<TextWrapper>
					Skip Coating
				</TextWrapper>
				<Icons.IconRight />
			</SkipCoating>
		</PackageCoatingContainer>
	);
};

export default PackageCoating;