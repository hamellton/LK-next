import React from "react";
import { DataType } from "../../../../Types/general";
import { Root, A, Span, Img, NeedHelpSpan } from "./NeedHelp.styles";

// const localeData = {
// 	WHATSAPP_CHAT_URL: "https://api.whatsapp.com/send/?phone=918929853854&text=",
// 	BUYONCHAT_HELP_CTA_CART: "Hi Lenskart, help me get started! I am on <pageName> page of mobile site. I need help for product ID: <pid-no>",
// };
const NeedHelp = ({ postNeedHelpWhatsappFun, localeData, configData, pId, isRTL=false }: 
	{postNeedHelpWhatsappFun: () => void, localeData: DataType, configData: DataType, pId: string, isRTL: boolean}) => {
	const whatsAppChatMsg =
	localeData.WHATSAPP_CHAT_URL &&
    localeData.BUY_ON_CHAT_HELP_CTA_CART ||
    (localeData.BUYONCHAT_HELP_CTA_CART &&
		`${localeData.WHATSAPP_CHAT_URL}${
			localeData.BUY_ON_CHAT_HELP_CTA_CART || localeData.BUYONCHAT_HELP_CTA_CART
		}`.replace("<pageName>", "Prescription").replace("<pid-no>", pId));

	const buyWithCallConfig =
    configData &&
    configData?.BUY_ON_CALL_WIDGET &&
    JSON.parse(configData?.BUY_ON_CALL_WIDGET);
	const {
		eyeglasses: { tel },
		cta: { isShown }
		// cta: { isShown /* whatsappIconGreen, iconGreen, text */ },
	} = buyWithCallConfig;

	const isBuyOnChat = buyWithCallConfig && buyWithCallConfig.buyonchat;

	return (
		<Root show={isShown}>
			<A href={isBuyOnChat ? whatsAppChatMsg : `tel:${tel}`} onClick={() => postNeedHelpWhatsappFun()}>
				<Span>
					{!isRTL && <Img
						src="https://static1.lenskart.com/media/desktop/img/DesignStudioIcons/WhatsappIcon.svg"
						alt="phone number"
					/>}
				</Span>
				<NeedHelpSpan>{localeData.NEED_HELP}{"?"}</NeedHelpSpan>
				{isRTL && <Img
					src="https://static1.lenskart.com/media/desktop/img/DesignStudioIcons/WhatsappIcon.svg"
					alt="phone number"
				/>}
			</A>
		</Root>
	);
};

export { NeedHelp };