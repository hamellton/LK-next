import React, { ChangeEvent, useState } from "react";
// import BottomSheetNew from "../../../../Common/BottomSheetNew";
import { ReturnExchangeTypes } from "./ExchangeBottomSheet.types";
import { Container, ExchangeTitle, ItemCard, ItemImage, ItemInfo, ItemBrand, Frame, Lens, RadioTitle, RadioContainer, ButtonContainer, Button } from "./ExchangeBottomSheet.styles";
import { Radio } from "../ReturnRefundRadio/ReturnRefundRadio.styles";
import BottomSheet from "../../../../Common/BottomSheet/BottomSheet.component";

const ExchangeBottomSheet = ({ show, closeHandler, item, exchangeOptions, continueHandler }: ReturnExchangeTypes) => {

	const [exchangeValue, setExchangeValue] = useState<string | undefined>(undefined);

	function changeHandler(e: ChangeEvent<HTMLInputElement>) {
		setExchangeValue(e.target.value);
	}

	function continueFunction() {
		if(exchangeValue) {
			continueHandler(exchangeValue);
		}
	}

	return (
		<BottomSheet show={show} showCrossIcon onBackdropClick={closeHandler} closebottomSheet={closeHandler}>
			<Container>
				<ExchangeTitle>
					Eyeglasses Being Exchanged
				</ExchangeTitle>
				<ItemCard>
					<ItemImage>
						<img src={item?.itemURL}/>
					</ItemImage>
					<ItemInfo>
						<ItemBrand>{item?.brandName}</ItemBrand>
						<Frame>{item?.frameFeatures?.map((frame, index) => {
							return (
								<span key={"f"+index}>
									{frame+" "}
								</span>
							);
						})}</Frame>
						<Lens>{item?.lensFeatures?.map((lens, index) => {
							return (
								<span key={"l"+index}>
									{"+ "+lens}
								</span>
							);
						})}</Lens>
					</ItemInfo>
				</ItemCard>
				<RadioTitle>
					What do you want to Exchange it with?
				</RadioTitle>
				<RadioContainer onChange={changeHandler}>
					{
						exchangeOptions?.map((option, index) => {
							return (
								<Radio key={"r"+index}>
									<input style={{ marginTop: "10px" }} id={option?.value} type="radio" value={option?.value} name="exchange-option"/>
									<label htmlFor={option?.value}>
										<img src={option?.imgURL} />
									</label>
								</Radio>
							);
						})
					}
				</RadioContainer>
				<ButtonContainer>
					<Button exchangeValue={exchangeValue} onClick={continueFunction}>
						<div>Continue</div>
						<div>(Enter your power later)</div>
					</Button>
				</ButtonContainer>
			</Container>
		</BottomSheet>
	);
};

export default ExchangeBottomSheet;
