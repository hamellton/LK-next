import React, { useState, useRef, useEffect } from "react";
import { DownArrow, IconRight } from "../../../../../Icons";
import { BankListType, BankListPropsTypes } from "../../Payment.types";
import { ArrowIcon, BankIcon, BankIconImage, BankListWrapper, ListWrapper, Heading3, ShowMore } from "../netBanking.styles";
// import "./BankList.scss";

const BankList = (props: BankListPropsTypes) => {
	//dataLocale props
	const { banksList, headline, getBankOffer, type, dataLocale } = props;
	const getOffer = (bank: BankListType) => {
		getBankOffer(bank);
	};
	const [showAll, setAllBank] = useState(false);
	const bankListRef = useRef<HTMLUListElement>(null);
	useEffect(() => {
		if (showAll) {
			if (bankListRef.current) { bankListRef.current.scrollTop += 60; }
		}
	}, [showAll]);
	return (
		<div className="banks-wrapper">
			{headline && <Heading3 className="headline"> {headline}</Heading3>}
			<ListWrapper ref={bankListRef} className={`banks-list ${showAll ? "isScroll" : ""}`}>
				{banksList &&
					banksList.map((bank: BankListType, index: React.Key) => {
						if (!showAll && index > 3)
						{ return null; }
						return (
							<BankListWrapper key={index} onClick={() => getOffer(bank)}>
								<BankIcon>
									<BankIconImage
										alt={dataLocale.LOGO}
										src={bank.logoImageUrl ||
											(type === "wallets" && "https://static5.lenskart.com/images/cust_mailer/Apr-03/Placeholder.png") ||
											(type === "nb" && "https://static5.lenskart.com/images/cust_mailer/Apr-06/placeholder_nb.png") || ""}
									/>
								</BankIcon>
								<span>
									<strong>{bank.label || bank.name}</strong>
									{bank.offers && bank.offers[0] && bank.offers[0].label && (
										<span className="b-offer">{bank.offers[0].label}</span>
									)}
								</span>
								<ArrowIcon><IconRight/></ArrowIcon>
							</BankListWrapper>);
					})}
			</ListWrapper>
			{banksList?.length > 4 && !showAll && (
				<ShowMore
					onClick={() => {
						setAllBank(true);
					}}
				>
					{dataLocale.SHOW_MORE} <DownArrow/>
				</ShowMore>
			)}
		</div>
	);
};

export default React.memo(BankList);
