/* eslint-disable react/display-name */
import React, { memo, useState } from "react";
// import "./NetBanking.scss";
import BankList from "./BankList";
import BankOffer from "./BankOffer";
import { BankListType, NetBankingPropsTypes } from "../Payment.types";

const NetBanking = memo((props: NetBankingPropsTypes) => {
	const [isBankList, setIsBankList] = useState(true);
	const [bankOffer, setBankOffer] = useState<any>([]);

	const getBankOffer = (bank: BankListType) => {
		const { createOrderPayment } = props;
		if (bank.offers[0]) {
			setIsBankList(false);
			setBankOffer(bank);
		} else {
			createOrderPayment({ netBankingBank: bank.bankcode }, "nb");
		}
	};

	const showBankList = () => {
		setIsBankList(true);
	};

	const {
		banksList,
		applyOffer,
		dataLocale: { PAY_USING_NETBANKING },
	} = props;
	return (
		<div className="col-sm-12 no-padding payment-content">
			{isBankList && (
				<BankList
					banksList={banksList}
					getBankOffer={getBankOffer}
					headline={PAY_USING_NETBANKING}
					type="nb"
					dataLocale={props.dataLocale}
				></BankList>
			)}
			{!isBankList && (
				<BankOffer
					applyOffer={applyOffer}
					bankOffer={bankOffer}
					showBankList={showBankList}
				></BankOffer>
			)}
		</div>
	);

});

export { NetBanking };
