import React from "react";
import { TimerWrapper } from "./styles";
import { TimerType } from "./Timer.types";

const Timer = ({ id, minutes, seconds }:TimerType) => {
	const [[mins, secs], setTime] = React.useState([minutes, seconds]);
	let timerId: NodeJS.Timeout;

	const tick = () => {

		if (mins === 0 && secs === 0) {
			reset();
		} else if (secs === 0) {
			setTime([mins - 1, 59]);
		} else {
			setTime([mins, secs - 1]);
		}
	};

	const reset = () => clearInterval(timerId);

	React.useEffect(() => {
		timerId = setInterval(() => tick(), 1000);
		return () => clearInterval(timerId);
	}, [[mins, secs]]);

	return <TimerWrapper id={id}>{`${mins
		.toString()
		.padStart(2, "0")}:${secs.toString().padStart(2, "0")}`}</TimerWrapper>;

};

export default Timer;
