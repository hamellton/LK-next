import React from "react";
import { AddOnType, CoatingTypes, SinglePrice } from "./Coating.types";
import { BackPressSection, CoatingBottomTextContainer, CoatingContainer, CoatingFirstRow, CoatingImage, CoatingImageCheck, CoatingPrice, CoatingSelectSection, CoatingTitle, Icon, OptionalText, SkipCoating } from "./Coating.styles";
import * as Icons from "../../../../Icons/index";

const Coating = ({ addOnData, onBackPress, skipCoatingAction, onSelectCoating, selectedAddOns, dataLocale }: CoatingTypes) => {
	if(addOnData?.length > 0) {
		return (
			<CoatingContainer>
				<CoatingFirstRow>
					<BackPressSection onClick={onBackPress}><Icon><Icons.BackArrow /></Icon>{dataLocale.LENS_PACKAGE}</BackPressSection>
					<OptionalText>{dataLocale.OPTIONAL}</OptionalText>
				</CoatingFirstRow>
				{addOnData.map((addOn: AddOnType) =>
					<CoatingSelectSection key={addOn.id} onClick={() => onSelectCoating(addOn.id)}>
						<CoatingImage src={addOn.imageUrl} alt="coating image"/>
						<CoatingBottomTextContainer>
							<CoatingTitle>{addOn.title}</CoatingTitle>
							<CoatingPrice><strong>{Array.isArray(addOn.price) ? (addOn.price?.filter(pr => pr.name === "Lenskart Price")?.[0]?.price || addOn.price?.[0]?.price) : (addOn.price as SinglePrice)?.basePrice}</strong></CoatingPrice>
						</CoatingBottomTextContainer>
						<CoatingImageCheck src={selectedAddOns?.some(sel => sel === addOn.id) ? "https://static.lenskart.com/media/desktop/img/pdp/check_enabled.png" : "https://static.lenskart.com/media/desktop/img/pdp/check_disabled.png"} alt="coating image"/>
					</CoatingSelectSection>)}
				<SkipCoating onClick={skipCoatingAction}>{dataLocale.SKIP_COATING}</SkipCoating>
			</CoatingContainer>
		);
	}
	return null;
};

export { Coating };
