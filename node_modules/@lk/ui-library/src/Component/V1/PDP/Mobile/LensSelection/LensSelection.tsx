import React from "react";
import { PriceType } from "../../../../Types/price.types";
import BuyOnCallWidget from "../../../BuyOnCallWidget";
import { BuyNowContainer, IconContainer, ImageContainer, LeftSection, LensOptionsContainer, LensSelectionCard, LensSelectionContainer, PriceContainer, Text, TextContainer, Title } from "./LensSelection.styles";

const LensSelection = (props: {
	title: string, prescriptionType: [{
		id: string,
		title: string,
		isPackageAvailable: boolean,
		imageUrl: string,
		subText: string
	}], packageTextConfig: any, productLensTypeDesc: any, buyWithCallConfig: any, category: string, whatsAppChatMsg: string, price?: PriceType, onClickHandler: (type: string, id: string) => void
}) => {
	const { title, prescriptionType, packageTextConfig, productLensTypeDesc, category, buyWithCallConfig, whatsAppChatMsg, price, onClickHandler } = props;

	return (
		<LensSelectionContainer>
			<Title>
				<h2>
					{title}
				</h2>
			</Title>
			<LensOptionsContainer>
				{prescriptionType.map((lensType, index) => {
					const powerType = lensType?.title;
					const powerTypeId = lensType.id;
					const packageTitle =
						(packageTextConfig && packageTextConfig[lensType.id]?.title) || powerType;
					const packageDesc =
						(packageTextConfig && packageTextConfig[lensType.id]?.subtitle) ||
						productLensTypeDesc[powerType]?.desc;
					return (
						<LensSelectionCard key={index} onClick={() => onClickHandler(powerType, powerTypeId)}>
							{
								productLensTypeDesc && productLensTypeDesc[powerType]?.image &&
								(<ImageContainer>
									<img src={`https://static.lenskart.com/media/mobile/universal/assets/${lensType.id}.png`} />
								</ImageContainer>)}
							<TextContainer>
								<Text type="primary">
									{packageTitle}
								</Text>
								<Text dangerouslySetInnerHTML={{ __html: packageDesc }}>
								</Text>
							</TextContainer>
							<IconContainer>
								&#x27e9;
							</IconContainer>
						</LensSelectionCard>
					);
				})}
			</LensOptionsContainer>
			{buyWithCallConfig && buyWithCallConfig.enabled && (
				<BuyOnCallWidget
					buyWithCallConfig={buyWithCallConfig}
					category={category}
					whatsAppChatMsg={whatsAppChatMsg}
				/>
			)}

			<PriceContainer>
				<LeftSection>
					<Text>
						Total:
						<strong>{price?.symbol} {price?.lkPrice}</strong>
					</Text>
					<Text>
						Frame
					</Text>
				</LeftSection>
				<BuyNowContainer>
					Buy this
				</BuyNowContainer>
			</PriceContainer>
		</LensSelectionContainer>
	);
};

export default LensSelection;