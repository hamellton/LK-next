import React, { useEffect } from "react";
import { animated, config, useSpring } from "react-spring";
import { Checkbox } from "../../../Common/Checkbox/Checkbox.component";
import { Address, Details, Image, ImageContainer, StoreDetails, StoreDetailsAndCheckbox, StoreRow as StoreRowComponent } from "./OtherStores.styles";
import { Store, StoreRowPropsType } from "./OtherStores.types";


const AnimatedStoreRow = animated(StoreRowComponent);

export default function StoreRow({ selected, store, onClick }: StoreRowPropsType) {
	const [styles, api] = useSpring(() => ({
		background: "var(--white)",
		config: config.wobbly
	}));

	useEffect(() => { 
		if (selected) {
			api({
				background: "var(--ghost-white)"
			});
		} else {
			api({
				background: "var(--white)"
			});
		}
	}, [selected]); 
  
	const handleClick = (store: Store) => {
		onClick(store);
	};
	return (
		<AnimatedStoreRow
			style={styles}
			onClick={() => handleClick(store)}
			onMouseEnter={() => api({
				background: "var(--ghost-white)",
			})}
			onMouseLeave={() => api({
				background: selected ? "var(--ghost-white)" : "var(--white)",
			})}
			selected={selected}
		>
			{false && <ImageContainer>
				<Image src="" alt={store.name} />
			</ImageContainer>}
			<StoreDetailsAndCheckbox>
				<StoreDetails>
					<Address>{ store?.name }</Address>
					{store?.address && <Details>{store?.address}</Details>}
					{store?.geoDistance && <Details>{store?.geoDistance} Km away</Details>}
				</StoreDetails>
				<Checkbox checked={selected} />
			</StoreDetailsAndCheckbox>
		</AnimatedStoreRow>
	);
}
