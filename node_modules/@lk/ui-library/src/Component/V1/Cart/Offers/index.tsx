import React from "react";
import {
	OfferWrapper,
	SubText,
	DescribeText,
	HR,
	GoldContainer,
	Img,
} from "./styles";
import { OffersTypes } from "./Offers.types";

/**
 * Default Offers Component
 */
const Offers = ({
	id,
	width,
	font,
	offerDetail,
	finalTotal,
	isRTL = false,
	currencyCode,
	// loyaltyProductAdded,
	// isSilverAdded,
	addOfferToCart,
	subdirectoryPath
}: OffersTypes) => {

	const handleAddGold = (link: string) => {
		if(link){
			window.location.href = `${subdirectoryPath}${link}`;
		}
	};

	const returnNewMessage = (headline: string) => {
		const tempHeadline = headline.split(" ");
		tempHeadline.pop();
		tempHeadline.push(`${currencyCode || "â‚¹"} ${finalTotal?.[0]?.amount || 0}`);
		if(finalTotal?.[1]?.label === "Tax" && finalTotal?.[1]?.amount > 0){
			tempHeadline.push("(+tax)");
		}
		return tempHeadline.join(" ");
	};

	const handleAddGoldDirectly = () => {
		if (!offerDetail?.pid || offerDetail?.ctaText !== "Add Gold") return;
		addOfferToCart({ productId: offerDetail?.pid });
		// cartActions.addToCart({ productId: offerDetail?.pid });
	};
	return (
		<OfferWrapper id={id} width={width} colorCode={offerDetail.colorCode} onClick={() => handleAddGoldDirectly()}>
			{/* <FlexWrapper>
				<HeadText styleFont={font}>
					{headText}
					<Tag>{tagText.toUpperCase()}</Tag>
				</HeadText>
				<InfoIconWrapper>
					<InfoIcon />
				</InfoIconWrapper>
			</FlexWrapper> */}
			<SubText styleFont={font}>
				{offerDetail.headline1.replaceAll(".", "")}
				{/* {loyaltyProductAdded && (
					<div style={{ cursor: "pointer" }}>
						<a href={`${!isSilverAdded ? "/loyalty" : "/silver"}`}>
							<img
								alt="Info"
								src="https://static1.lenskart.com/media/desktop/img/DesignStudioIcons/InfoIcon.svg"
								style={{ height: "20px", width: "20px" }}
							/>
						</a>
					</div>
				)} */}
			</SubText>
			<DescribeText styleFont={font} isRTL={isRTL} >{offerDetail?.headline2?.includes("%s") ?
				returnNewMessage(offerDetail.headline2)
				: offerDetail.headline2}</DescribeText>
			<HR/>
			<GoldContainer onClick={ () => handleAddGold(offerDetail?.ctaLink || "")}>
				<SubText styleFont={font}>{offerDetail?.ctaText || "Add Gold and Choose Second Frame"}</SubText>
				<span>
					<Img
						isRTL={isRTL}
						alt="oval-button"
						src="https://static.lenskart.com/media/desktop/img/DesignStudioIcons/OvalButton.svg"
					/>
				</span>
			</GoldContainer>
		</OfferWrapper>
	);
};
export default Offers;
