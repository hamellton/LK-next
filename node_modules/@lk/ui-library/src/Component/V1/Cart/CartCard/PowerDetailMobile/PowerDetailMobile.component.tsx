import React, { useState } from "react";
import * as Icons from "../../../../../Icons/index";
import PowerDetails from "../PowerDetail";
import { Container, DropdownContainer, Dropdown, Dropper, TableContainer, EditPowerContainer, EditPowerButton } from "./PowerDetailMobile.styles";
import { PowerDetailMobileTypes, } from "./PowerDetailMobile.types";


const PowerDetailMobile = ({ prescription, editPowerHandler,
	showPowerDetailsFn,
	redisCommonData,
	handleOpenPrescriptionImageModal,
	mobileView,
	dataLocale, flags }: PowerDetailMobileTypes) => {
	const [displayTable, setDisplayTable] = useState(false);
	function displayTableHandler () {
		setDisplayTable(!displayTable);
	}
	return (
		<Container onClick={displayTableHandler}>
			<DropdownContainer>
				<Dropdown>
					<span>View Power Details</span>
					<Dropper displayTable={displayTable}><Icons.DownArrow /></Dropper>
				</Dropdown>
				<TableContainer displayTable={displayTable}>
					<PowerDetails mobileView={mobileView} dataLocale={dataLocale} redisCommonData={redisCommonData} showPowerDetailsFn={showPowerDetailsFn} handleOpenPrescriptionImageModal={handleOpenPrescriptionImageModal} prescription={prescription}/>

					{flags?.canUpdatePower && <EditPowerContainer>
						<EditPowerButton onClick={editPowerHandler}>
							Edit Power
						</EditPowerButton>
					</EditPowerContainer>}
				</TableContainer>
			</DropdownContainer>
		</Container>

	);
};

export default PowerDetailMobile;
