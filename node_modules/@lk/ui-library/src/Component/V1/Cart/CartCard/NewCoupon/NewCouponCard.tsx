import React, { useState } from "react";
import { ApplyCoupon, BottomSection, BrandImageWrapper, Container, DescriptionText, Heading, Row, SubItems, Subdescription, TermsAndCondition, TopSection } from "./NewCouponCard.styles";
import { NewCouponCardTypes } from "./NewCouponCard.types";
import * as Icons from "../../../../../Icons/index";

const NewCouponCard = ({ offer, onClick, appliedCoupon, dataLocale } : NewCouponCardTypes) => {

	const { brandImage, backgroundColor, borderColor, canApply, code, description, heading, /* label, paymentOffer, , priority, autoApplicable, */ subDescription, subDescriptionColorCode, termsAndConditions } = offer; 
	
	const[terms,setTerms] = useState(false);
	const showTerms = () => { 
		setTerms(!terms);
	};

	return (
		<Container borderColor={borderColor}>
			<TopSection backgroundColor={backgroundColor}>
				<Row>
					<SubItems>
						{brandImage && (<div>
							<BrandImageWrapper brandImage={brandImage} />
						</div>)}
						<div>{code}</div>
					</SubItems>
					{canApply && !(appliedCoupon === code) && (
						<ApplyCoupon onClick={onClick}>
							{dataLocale?.APPLY_COUPON || "Apply Coupon"}
						</ApplyCoupon>
					)}

					{canApply && (appliedCoupon === code) && (
						<ApplyCoupon disable={true}>
							<Icons.Check fill="#000042" />
							<div>
								{dataLocale?.APPLIED || "Applied"}
							</div>
						</ApplyCoupon>
					)}
				</Row>
				<Row>
					<Heading>
						{heading}
					</Heading>
				</Row>
			</TopSection>

			<BottomSection>
				{subDescription && (
					<Subdescription subDescriptionColorCode={subDescriptionColorCode}>
						{subDescription}
					</Subdescription>
				)}
				{description && (
					<DescriptionText>
						{description}
					</DescriptionText>)}

				{!terms && <TermsAndCondition onClick={showTerms}>{dataLocale?.TERMS_AND_CONDITIONS || "Terms & Conditions"}</TermsAndCondition>}
				{terms && <DescriptionText>{termsAndConditions}</DescriptionText>}
				{terms && <TermsAndCondition onClick={showTerms}>{dataLocale?.SEE_LESS || "See Less"}</TermsAndCondition>}
			</BottomSection>
		</Container>
	);
};
export default NewCouponCard;