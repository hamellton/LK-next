import React, { useEffect } from "react";
import { animated, useSpring } from "react-spring";
import { Backdrop, Container, Content, Heading, IconContainer, Link, PopUpWrapper, SuccessIcon, Text } from "./FeedbackPopUp.styles";
import { FeedbackPopUpType } from "./FeedbackPopUp.types";

const initialProps = {
	opacity: 0,
	transform: "translate(-50%, -40%)",
	contentOpacity: 0,
};

const finalProps = {
	opacity: 1,
	transform: "translate(-50%, -50%)",
	contentOpacity: 1
};

const AnimatedBackdrop = animated(Backdrop);
const AnimatedContent = animated(Content);

export default function FeedbackPopUp({ dataLocale, onClick, show }: FeedbackPopUpType) {
	const [props, api] = useSpring(() => initialProps);

	useEffect(() => {
		if (show) api(finalProps);
		else api(initialProps);
	}, [show]);

	return (
		<PopUpWrapper>
			<AnimatedBackdrop style={{ opacity: props.opacity }} />
			<AnimatedContent style={{ opacity: props.contentOpacity, transform: props.transform }}>
				<Container>
					<IconContainer>
						<SuccessIcon />
					</IconContainer>
					<Heading>
						{(dataLocale.THANK_YOU as string)}
						{(dataLocale.SYMBOL_EXCLAIMATION as string)}
					</Heading>
					<Text marginTop="10px">{(dataLocale.FOR_POSTING_REVIEW as string)}</Text>
					<Text marginTop="15px">{(dataLocale.REVIEW_PENDING_FOR_PUBLISH as string)}</Text>
					<Link
						onClick={onClick}
					>
						{(dataLocale.CONTINUE_SHOPPING as string)}
					</Link>
				</Container>
			</AnimatedContent>
		</PopUpWrapper>
	);
}
