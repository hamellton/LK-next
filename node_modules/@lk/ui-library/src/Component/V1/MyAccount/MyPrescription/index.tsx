import React from "react";
import { MyPrescriptionTypes } from "./MyPrescription.types";
import { HeaderWrapper, Heading, PresCriptionWrapper, MyPrescriptionWrapper, Span, P, Subheading, UserPowerType, PowerDetailsWrapper, AddPowerTable, PowerHead, PowerHeading, PowerTableBlock, PowerTableList, PowerItemList, ButtonConatiner, SelectPrescriptionButton, DateSpan } from "./styles";

const MyPrescription = ({ dataLocale, prescriptionList, selectSavedPrescription, showpowerType = true, showDate = true, showSelectedButton }: MyPrescriptionTypes) => {
	const selectSavedPrescriptionFn = (item:any) => {
		selectSavedPrescription(item);
	};
	return (<>
		<HeaderWrapper>
			<Heading>{dataLocale.MY_SAVED_PRESCRIPTION}</Heading>
		</HeaderWrapper>
		<PresCriptionWrapper>
			{
				prescriptionList?.length ? prescriptionList?.map((item:any) => {
					return (
						<MyPrescriptionWrapper key={`power${item?.id}`}>
							<UserPowerType>
								<Subheading>
									<Span>{dataLocale.NAME}: </Span><Span>{item?.userName}</Span>
								</Subheading>
								{showpowerType && <P><Span>{dataLocale.POWER_TYPE}: </Span><Span>{item?.powerType}</Span></P>}
								{showDate && <DateSpan>{dataLocale.CREATED} {new Date(item?.recordedAt)?.toString()?.slice(0, 15)}</DateSpan>}
							</UserPowerType>
							{showSelectedButton && <ButtonConatiner>
								<SelectPrescriptionButton onClick={() => selectSavedPrescriptionFn(item)}>
									Select
								</SelectPrescriptionButton>
							</ButtonConatiner>}
							<PowerDetailsWrapper>
								<AddPowerTable>
									<PowerHead>
										<PowerHeading>{dataLocale.EYE}</PowerHeading>
										<PowerHeading>{dataLocale.RIGHT_EYE}</PowerHeading>
										<PowerHeading>{dataLocale.LEFT_EYE}</PowerHeading>
									</PowerHead>
								</AddPowerTable>
								<PowerTableBlock>
									<PowerTableList>
										<PowerHeading>{dataLocale.SPHERICAL}</PowerHeading>
										<PowerItemList>{item?.right?.sph}</PowerItemList>
										<PowerItemList>{item?.left?.sph}</PowerItemList>
									</PowerTableList>
								</PowerTableBlock>
								<PowerTableBlock>
									<PowerTableList>
										<PowerHeading>{dataLocale.CYLINDRICAL}</PowerHeading>
										<PowerItemList>{item?.right?.cyl}</PowerItemList>
										<PowerItemList>{item?.left?.cyl}</PowerItemList>
									</PowerTableList>
								</PowerTableBlock>
								<PowerTableBlock>
									<PowerTableList>
										<PowerHeading>{dataLocale.AXIS}</PowerHeading>
										<PowerItemList>{item?.right?.axis}</PowerItemList>
										<PowerItemList>{item?.left?.axis}</PowerItemList>
									</PowerTableList>
								</PowerTableBlock>
								<PowerTableBlock>
									<PowerTableList>
										<PowerHeading>{dataLocale.AP}</PowerHeading>
										<PowerItemList>{item?.right?.ap}</PowerItemList>
										<PowerItemList>{item?.right?.ap}</PowerItemList>
									</PowerTableList>
								</PowerTableBlock>
							</PowerDetailsWrapper>
						</MyPrescriptionWrapper>
					);
				}) : null
			}
		</PresCriptionWrapper>
        
	</>);
};

export default MyPrescription;