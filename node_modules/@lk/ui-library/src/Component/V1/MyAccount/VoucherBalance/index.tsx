import React from "react";
import { useState } from "react";
import { ComponentSizeENUM, ThemeENUM, TypographyENUM } from "../../../../Types/general";
import { positionENUM } from "../../../Common/Input/Input.types";
import PrimaryButton from "../../../Common/PrimaryButton";
import { AlertMessage } from "../SavedCards/styles";
import { ErrorMessage, HeaderWrapper, Heading, InputField, InputLabel, ButtonWrapper, InputWrapper, Border } from "./styles";
import { VoucherBalanceType } from "./VoucherBalance.types";

const CheckVoucher = ({ dataLocale, onCheckBalance, isRTL = false, errorMessage } : VoucherBalanceType) => {
	const [inputVoucher, setInputVoucher] = useState("");
	const [hasError, sethasError] = useState(false);
	// const [btnDisabled, setBtnDisabled] = useState(false);
	const onChangeVouchertext = (e:any) => {
		console.log(e);
		setInputVoucher(e.target.value); /*setBtnDisabled(false);*/
		if(e.target.value === "") {
			sethasError(true);
		} else {
			sethasError(false);
		}
	};

	const onCheckVoucher = () => {
		if (!inputVoucher) sethasError(true);
		else onCheckBalance({ query: inputVoucher });
		// setBtnDisabled(true);
	};
	return (<>
		<HeaderWrapper>
			<Heading>{dataLocale.CHECK_VOUCHER_BALANCE}</Heading>
		</HeaderWrapper>
		{errorMessage && <AlertMessage isError><strong style={{ color: "rgb(169, 68, 66)" }}>Error:</strong> {errorMessage}</AlertMessage>}
		<InputWrapper>
			<InputLabel
				prefixText={false}
				labelPosition={isRTL ? positionENUM.right : positionENUM.left}
				error={hasError}
			>
				{dataLocale.ENTER_YOUR_VOUCHER_CODE}
			</InputLabel>
			<InputField required width={"40"} onChange={(e:any) => onChangeVouchertext(e)} type="text" disabled={false} error={hasError} isRTL={isRTL} prefixText={false} value={inputVoucher} />
			{hasError && <ErrorMessage>{dataLocale.ERRORMESSAGE}</ErrorMessage>}
		</InputWrapper>
		<Border id="divider" />
		<ButtonWrapper>
			<PrimaryButton componentSize={ComponentSizeENUM.medium} color={"#fff"} backgroundColor={"#f18132"} borderColor={"#ef721a"} /*disabled={btnDisabled}*/ primaryText={dataLocale.CHECK_BALANCE} onBtnClick={onCheckVoucher} id={"primary-button"} width={"20%"} height="46px" theme={ThemeENUM.secondary} font={TypographyENUM.defaultMedium}></PrimaryButton>
		</ButtonWrapper>
	</>);
};

export default CheckVoucher;
