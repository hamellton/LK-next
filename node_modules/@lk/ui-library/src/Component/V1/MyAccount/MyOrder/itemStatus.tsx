import React from "react";
import { formatDateWithPattern } from "../../../../helpers";
// import { getFormattedDate } from "../../../../helper";
// import { formatDateWithPattern } from "../../../../helpers";
import { ItemStatusContainer, ItemStatusHeading, ItemStatusSubText, ItemStatusWarpper, StatusIcon } from "././Items/styles";
import ExpextedDelivery from "./ExpectedDelivery";
import { itemStatusType } from "./MyOrder.types";
import { Image } from "./styles";


const ItemStatus = ({ dataLocale, itemStatus, deliveryDate, revisedETA, mobileView }: itemStatusType) => {
	const statusIconUrl:string = itemStatus.currentStatus?.iconUrl || "https://static.lenskart.com/media/mobile/universal/assets/default-status-icon.svg";
	return (
		<ItemStatusContainer mobileView={mobileView}>
			<StatusIcon mobileView={mobileView}>
				<Image alt="item tracking status icon" src={statusIconUrl}></Image>
			</StatusIcon>
			<ItemStatusWarpper>
				{
					deliveryDate &&
					<ItemStatusHeading mobileView={mobileView}>
						<ExpextedDelivery revisedETA={revisedETA} deliveryDate={deliveryDate} dataLocale={dataLocale} />
					</ItemStatusHeading>
				}
				<ItemStatusSubText mobileView={mobileView} deliveryDate={deliveryDate}>
					{
						!deliveryDate ? `${itemStatus?.currentStatus?.statusLabel} ${itemStatus?.arrivedEarlyText} ${mobileView ? "" : formatDateWithPattern(itemStatus?.currentStatus?.createdAt, "EEE, D MMM")}` : `${itemStatus?.currentStatus?.statusLabel}`
					}
				</ItemStatusSubText>
			</ItemStatusWarpper>
		</ItemStatusContainer>
	);
};

export default ItemStatus;
